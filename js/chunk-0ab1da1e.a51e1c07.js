(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ab1da1e"],{"45aa":function(t,e,a){"use strict";a("8997")},8997:function(t,e,a){},e5be:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-layout",[a("div",{staticClass:"content text-center"},[a("h2",{staticClass:"my-30px"},[t._v("卡片市场价值估算:")]),a("p",[t._v(" 当前 "),a("strong",[t._v(" 1bnx = "+t._s(t.goldRatio)+" gold ")])]),a("div",[a("a-input-search",{staticClass:"input-search",attrs:{placeholder:"输入 token_id","enter-button":"价值估算",size:"large"},on:{search:t.calValueFromTokenId},model:{value:t.tokenId,callback:function(e){t.tokenId=e},expression:"tokenId"}})],1),a("br"),a("props-table",{attrs:{loading:t.loading,"data-source":t.propsDataSource}}),a("br"),a("price-table",{attrs:{loading:t.priceLoading,"data-source":t.priceDataSource}})],1)])},n=[],o=a("1da1"),c=(a("b680"),a("96cf"),a("9c9e")),i=a("db49"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-table",{attrs:{bordered:"",loading:t.loading,columns:t.tableColumns,"data-source":t.dataSourceWithKey,scroll:{x:!0},pagination:!1}})},d=[],s=a("5530"),u=(a("d81d"),a("ed08")),p={props:{dataSource:{type:Array,required:!0},loading:{type:Boolean,default:!0}},computed:{tableColumns:function(){return[{title:"卡片类型",width:90,dataIndex:"cardType"},{title:"等级",width:90,dataIndex:"level"},{title:"职业",width:90,dataIndex:"career"},{title:"力量",width:90,dataIndex:"strength"},{title:"敏捷",width:90,dataIndex:"agility"},{title:"体质",width:90,dataIndex:"physique"},{title:"意志",width:90,dataIndex:"volition"},{title:"智力",width:90,dataIndex:"brains"},{title:"精神",width:90,dataIndex:"charm"},{title:"每区块收益",width:120,dataIndex:"valPerBlock"},{title:"每天收益",width:120,dataIndex:"valPerDay"}]},dataSourceWithKey:function(){return this.dataSource.map((function(t){return Object(s["a"])(Object(s["a"])({},t),{},{key:Object(u["a"])(),valPerBlock:t.valPerBlock,valPerDay:t.valPerDay})}))}}},h=p,b=a("2877"),g=Object(b["a"])(h,l,d,!1,null,null,null),y=g.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-table",{attrs:{bordered:"",loading:t.loading,columns:t.tableColumns,"data-source":t.dataSourceWithKey,scroll:{x:!0},pagination:!1}})},f=[],x={props:{dataSource:{type:Array,required:!0},loading:{type:Boolean,default:!0}},computed:{tableColumns:function(){return[{title:"回本天数",width:90,dataIndex:"day"},{title:"售价",width:90,dataIndex:"price"},{title:"每日收益",width:90,dataIndex:"valPerDay"}]},dataSourceWithKey:function(){return this.dataSource.map((function(t){return Object(s["a"])(Object(s["a"])({},t),{},{key:Object(u["a"])()})}))}}},m=x,v=Object(b["a"])(m,w,f,!1,null,null,null),k=v.exports,C=a("5f76"),I=a("d8a1"),D=28800,P={name:"MarketModel",mixins:[c["a"]],components:{PropsTable:y,PriceTable:k},data:function(){return{goldRatio:0,tokenId:"",loading:!1,startDay:29,endDay:39,priceLoading:!1,propsDataSource:[],priceDataSource:[],playContract:null,pancakeContract:null}},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.initWeb3Account();case 2:if(t.account){e.next=4;break}return e.abrupt("return");case 4:return t.initContract(),e.next=7,t.getGoldBnxRatio();case 7:case"end":return e.stop()}}),e)})))()},methods:{initContract:function(){this.playContract=new this.web3.eth.Contract(C,i["a"].playContrAddr),this.pancakeContract=new this.web3.eth.Contract(I,i["a"].pancakeContrAddr)},calValueFromTokenId:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,o,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t){a.next=2;break}return a.abrupt("return");case 2:return e.loading=!0,a.next=5,e.playContract.methods.getPlayerInfoBySet(t).call();case 5:r=a.sent,e.loading=!1,r&&(n={strength:r[0][0],agility:r[0][1],physique:r[0][2],volition:r[0][3],brains:r[0][4],charm:r[0][5],level:r[0][6],career:Object(u["b"])(r[1])},o=e.calValPerBlock(n),c=o*D,n.valPerBlock="".concat(o.toFixed(4)," gold"),n.valPerDay="".concat(c.toFixed(2)," gold"),n.cardType=e.getCardType(n),console.log(e.getCardType(n)),e.propsDataSource=[],e.propsDataSource.push(n),e.priceLoading=!0,e.priceDataSource=e.calPriceInDays(c),e.priceLoading=!1);case 8:case"end":return a.stop()}}),a)})))()},getCardType:function(t){var e=t.strength,a=t.agility,r=t.physique,n=t.brains,o=t.charm,c=t.career,i=[];switch(c){case"法师":i=[n,o];break;case"战士":i=[e,r];break;case"游侠":i=[e,a];break;case"盗贼":i=[a,e];break}return i[0]>=86&&i[1]>=61?"矿卡":"黑卡"},calPriceInDays:function(t){for(var e=[],a=this.startDay;a<=this.endDay;a++)e.push({day:a,price:"".concat((a*t/this.goldRatio).toFixed(2)," bnx"),valPerDay:"".concat(t.toFixed(4)," gold")});return e},calValPerBlock:function(t){var e=t.strength,a=t.agility,r=t.physique,n=t.brains,o=t.charm,c=t.level,i=t.career,l="",d=[];switch(i){case"法师":l=n,d=[n,o];break;case"战士":l=e,d=[e,r];break;case"游侠":l=e,d=[e,a];break;case"盗贼":l=a,d=[a,e];break}return c>1&&d[0]>=86&&d[1]>=61?this.calVal(l,c):this.calVal(85,c)},calVal:function(t,e){var a=.01,r=.005*(t-85);return e>1?(a+r)*Math.pow(2,e-1):a},getGoldBnxRatio:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=new t.web3.utils.BN("10000000000000000000"),e.next=3,t.pancakeContract.methods.getAmountsOut(a,[i["a"].bnxContrAddr,i["a"].busdContrAddr,i["a"].goldContrAddr]).call();case 3:r=e.sent,n=new t.web3.utils.BN(r[2]),o=n.div(t.web3.utils.toBN(10)),console.log(o),t.goldRatio=t.web3.utils.fromWei(o);case 8:case"end":return e.stop()}}),e)})))()}}},S=P,B=(a("45aa"),Object(b["a"])(S,r,n,!1,null,"2c42d0db",null));e["default"]=B.exports}}]);
//# sourceMappingURL=chunk-0ab1da1e.a51e1c07.js.map