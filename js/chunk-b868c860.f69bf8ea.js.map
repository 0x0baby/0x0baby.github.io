{"version":3,"sources":["webpack:///./src/views/Harvest.vue?6a8e","webpack:///./src/components/harvest/propsTable.vue?0ea7","webpack:///./src/views/Harvest.vue?8462","webpack:///./src/components/harvest/propsTable.vue?36ce","webpack:///src/components/harvest/propsTable.vue","webpack:///./src/components/harvest/propsTable.vue?8391","webpack:///./src/components/harvest/propsTable.vue?b5e3","webpack:///src/views/Harvest.vue","webpack:///./src/views/Harvest.vue?6b5f","webpack:///./src/views/Harvest.vue?4be9"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","formattedTotal","attrs","scopedSlots","_u","key","fn","staticStyle","account","cardsCount","proxy","propsDataSource","loading","on","getAward","getAllAward","quitAll","quitSelect","model","value","callback","$$v","selectedTokens","expression","staticRenderFns","$event","$emit","groupRecords","gt2kRecords","length","exec2k","execAll","tableColumns","dataSourceWithKey","x","selectedRowKeys","onChange","onSelectChange","_","record","tokenId","displayOptimize","copyAddr","workType","_e","props","dataSource","type","Array","required","Boolean","default","data","computed","map","fullTimeRecords","partTimeRecords","methods","selectedRows","clipboard","destroy","fireWithRecords","console","log","records","component","name","mixins","components","PropsTable","rate","total","tokens","feeRate","baseFee","copyStatus","goldPrice","work","partTimeWork","playContract","feeContract","toFixed","totalUsd","mounted","window","getProperty","setTimeout","copyBtn","successCb","accountBtn","calculateFee","payFee","web3","eth","sendTransaction"],"mappings":"2IAAA,W,kCCAA,W,yCCAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,cAAc,CAACA,EAAG,KAAK,CAACE,YAAY,uBAAuB,CAACN,EAAIO,GAAG,UAAUH,EAAG,SAAS,CAACJ,EAAIO,GAAG,IAAIP,EAAIQ,GAAGR,EAAIS,gBAAgB,YAAYL,EAAG,QAAQA,EAAG,MAAMA,EAAG,QAAQ,CAACM,MAAM,CAAC,OAAS,CAAC,GAAI,MAAM,CAACN,EAAG,QAAQ,CAACM,MAAM,CAAC,GAAK,GAAG,GAAK,KAAK,CAACN,EAAG,UAAU,CAACE,YAAY,sBAAsBI,MAAM,CAAC,KAAO,OAAO,QAAU,QAAQC,YAAYX,EAAIY,GAAG,CAAC,CAACC,IAAI,cAAcC,GAAG,WAAW,MAAO,CAAEd,EAAW,QAAE,CAACI,EAAG,OAAO,CAACW,YAAY,CAAC,OAAS,UAAU,eAAe,OAAOL,MAAM,CAAC,GAAK,UAAU,sBAAsBV,EAAIgB,UAAU,CAAChB,EAAIO,GAAG,IAAIP,EAAIQ,GAAGR,EAAIgB,SAAS,OAAQhB,EAAc,WAAEI,EAAG,OAAO,CAACW,YAAY,CAAC,MAAQ,YAAY,CAACX,EAAG,SAAS,CAACM,MAAM,CAAC,KAAO,kBAAkBV,EAAIO,GAAG,WAAW,GAAGH,EAAG,YAAY,CAACM,MAAM,CAAC,QAAU,OAAO,UAAY,UAAU,CAACN,EAAG,SAAS,CAACW,YAAY,CAAC,MAAQ,UAAU,OAAS,WAAWL,MAAM,CAAC,GAAK,WAAW,KAAO,OAAO,sBAAsBV,EAAIgB,QAAQ,KAAO,SAAS,IAAIZ,EAAG,OAAO,CAACJ,EAAIO,GAAG,YAAYH,EAAG,MAAM,CAACW,YAAY,CAAC,aAAa,cAAc,CAACX,EAAG,IAAI,CAACJ,EAAIO,GAAG,SAASP,EAAIQ,GAAGR,EAAIiB,YAAY,YAAYC,OAAM,QAAW,GAAGd,EAAG,QAAQ,CAACM,MAAM,CAAC,GAAK,GAAG,GAAK,KAAK,CAACN,EAAG,UAAU,CAACM,MAAM,CAAC,KAAO,UAAU,QAAU,QAAQC,YAAYX,EAAIY,GAAG,CAAC,CAACC,IAAI,cAAcC,GAAG,WAAW,MAAO,CAACV,EAAG,MAAM,CAACW,YAAY,CAAC,aAAa,cAAc,CAACX,EAAG,IAAI,CAACJ,EAAIO,GAAG,sDAAsDH,EAAG,IAAI,CAACJ,EAAIO,GAAG,mBAAmBH,EAAG,SAAS,CAACJ,EAAIO,GAAG,qCAAqCH,EAAG,IAAI,CAACJ,EAAIO,GAAG,qBAAqBH,EAAG,SAAS,CAACA,EAAG,IAAI,CAACM,MAAM,CAAC,KAAO,+CAA+C,OAAS,WAAW,CAACV,EAAIO,GAAG,yDAAyDW,OAAM,QAAW,IAAI,GAAGd,EAAG,MAAMA,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACA,EAAG,aAAa,CAACM,MAAM,CAAC,cAAcV,EAAImB,gBAAgB,QAAUnB,EAAIoB,SAASC,GAAG,CAAC,KAAOrB,EAAIsB,SAAS,WAAatB,EAAIuB,YAAY,QAAUvB,EAAIwB,QAAQ,WAAaxB,EAAIyB,YAAYC,MAAM,CAACC,MAAO3B,EAAkB,eAAE4B,SAAS,SAAUC,GAAM7B,EAAI8B,eAAeD,GAAKE,WAAW,qBAAqB,IAAI,IAAI,IACljEC,EAAkB,G,8ECDlB,EAAS,WAAa,IAAIhC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,IAAI,CAACE,YAAY,mBAAmB,CAACF,EAAG,UAAU,CAACE,YAAY,aAAa,CAACF,EAAG,WAAW,CAACE,YAAY,UAAUI,MAAM,CAAC,KAAO,WAAWW,GAAG,CAAC,MAAQ,SAASY,GAAQ,OAAOjC,EAAIkC,MAAM,WAAW,CAAClC,EAAIO,GAAG,cAAcH,EAAG,WAAW,CAACE,YAAY,UAAUI,MAAM,CAAC,UAAYV,EAAImC,aAAaC,YAAYC,OAAO,KAAO,WAAWhB,GAAG,CAAC,MAAQrB,EAAIsC,SAAS,CAACtC,EAAIO,GAAG,aAAaH,EAAG,WAAW,CAACE,YAAY,UAAUI,MAAM,CAAC,KAAO,WAAWW,GAAG,CAAC,MAAQrB,EAAIuC,UAAU,CAACvC,EAAIO,GAAG,cAAcH,EAAG,WAAW,CAACE,YAAY,UAAUI,MAAM,CAAC,KAAO,WAAWW,GAAG,CAAC,MAAQrB,EAAIyB,aAAa,CAACzB,EAAIO,GAAG,cAAcH,EAAG,WAAW,CAACE,YAAY,UAAUI,MAAM,CAAC,KAAO,WAAWW,GAAG,CAAC,MAAQrB,EAAIwB,UAAU,CAACxB,EAAIO,GAAG,eAAe,IAAI,GAAGH,EAAG,UAAU,CAACM,MAAM,CAAC,SAAW,GAAG,QAAUV,EAAIoB,QAAQ,QAAUpB,EAAIwC,aAAa,cAAcxC,EAAIyC,kBAAkB,OAAS,CAAEC,GAAG,GAAO,YAAa,EAAM,gBAAgB,CACl+BC,gBAAiB3C,EAAI2C,gBACrBC,SAAU5C,EAAI6C,iBACblC,YAAYX,EAAIY,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASgC,EAAGC,GAAQ,MAAO,CAAC3C,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,OAAO,CAACM,MAAM,CAAC,MAAQqC,EAAOC,UAAU,CAAChD,EAAIO,GAAGP,EAAIQ,GAAGR,EAAIiD,gBAAgBF,EAAOC,aAAa5C,EAAG,WAAW,CAACW,YAAY,CAAC,cAAc,QAAQL,MAAM,CAAC,KAAO,UAAU,KAAO,QAAQ,GAAM,OAAUqC,EAAU,IAAG,sBAAsBA,EAAOC,SAAS3B,GAAG,CAAC,MAAQ,SAASY,GAAQ,OAAOjC,EAAIkD,SAASH,EAAOlC,QAAQ,CAACb,EAAIO,GAAG,WAAW,MAAM,CAACM,IAAI,WAAWC,GAAG,SAASgC,EAAGC,GAAQ,MAAO,CAAsB,IAApBA,EAAOI,SAAgB/C,EAAG,QAAQ,CAACM,MAAM,CAAC,MAAQ,YAAY,CAACV,EAAIO,GAAG,QAA6B,IAApBwC,EAAOI,SAAgB/C,EAAG,QAAQ,CAACM,MAAM,CAAC,MAAQ,YAAY,CAACV,EAAIO,GAAG,QAAQP,EAAIoD,aAAa,IAChqB,EAAkB,G,mEC+DtB,GACEC,MAAO,CACLC,WAAY,CACVC,KAAMC,MACNC,UAAU,GAEZrC,QAAS,CACPmC,KAAMG,QACNC,SAAS,GAEXhC,MAAO,CACL4B,KAAMC,MACNC,UAAU,IAGdG,KAfF,WAgBI,MAAO,CACLjB,gBAAiB,KAGrBkB,SAAU,CACRrB,aADJ,WAEM,MAAO,CACb,CACQ,MAAR,WACQ,MAAR,IACQ,YAAR,CAAU,aAAV,YAEA,CACQ,MAAR,KACQ,UAAR,OACQ,MAAR,IAEA,CACQ,MAAR,KACQ,UAAR,QACQ,MAAR,GACQ,OAAR,cAAU,OAAV,iBACQ,eAAR,sBAEA,CACQ,MAAR,KACQ,MAAR,GACQ,UAAR,WACQ,OAAR,cAAU,OAAV,uBACQ,eAAR,sBAEA,CACQ,MAAR,KACQ,MAAR,GACQ,UAAR,UACQ,OAAR,cAAU,OAAV,qBACQ,eAAR,sBAEA,CACQ,MAAR,KACQ,MAAR,GACQ,UAAR,WACQ,OAAR,cAAU,OAAV,uBACQ,eAAR,sBAEA,CACQ,MAAR,KACQ,MAAR,GACQ,UAAR,WACQ,OAAR,cAAU,OAAV,uBACQ,eAAR,sBAEA,CACQ,MAAR,KACQ,MAAR,GACQ,UAAR,SACQ,OAAR,cAAU,OAAV,mBACQ,eAAR,sBAEA,CACQ,MAAR,KACQ,MAAR,GACQ,UAAR,QACQ,OAAR,cAAU,OAAV,iBACQ,eAAR,sBAEA,CACQ,MAAR,KACQ,MAAR,IACQ,UAAR,OACQ,OAAR,cAAU,OAAV,eACQ,eAAR,wBAIIC,kBAvEJ,WAwEM,OAAOxC,KAAKqD,WAAWQ,KAAI,SAAjC,2CACA,GADA,IAEA,qBACA,kBAGI3B,aA9EJ,WA+EM,IADN,EACA,KACA,KACA,KAHA,iBAKA,wBALA,IAKA,0CACA,eACA,UAEA,UAEA,aACA,WAZA,8BAgBM,MAAO,CACL4B,gBAAR,EACQC,gBAAR,EACQ5B,YAAR,KAIE6B,QAAS,CACPpB,eADJ,SACA,KACM5C,KAAK0C,gBAAkBA,EACvB1C,KAAKiE,aAAeA,EACpBjE,KAAKiC,MAAM,QAASgC,IAEtBjB,gBANJ,SAMA,GACM,IAAN,6BACM,MAAO,GAAb,qBAEIC,SAVJ,SAUA,cACA,6BACMiB,EAAU9C,GAAG,WAAW,WACtB,EAAR,yBACQ8C,EAAUC,cAGd9B,OAjBJ,WAkBMrC,KAAK0C,gBAAkB1C,KAAKkC,aAAaC,YAAY0B,KAAI,SAA/D,mBACM7D,KAAKoE,gBAAgBpE,KAAKkC,aAAaC,cAEzCG,QArBJ,WAsBMtC,KAAK0C,gBAAkB1C,KAAKwC,kBAAkBqB,KAAI,SAAxD,mBACM7D,KAAKiC,MAAM,QAASjC,KAAKwC,mBACzBxC,KAAKiC,MAAM,eAEbT,WA1BJ,WA4BM6C,QAAQC,IAAI,gBAAiBtE,KAAKiE,cAClCjE,KAAKiC,MAAM,QAASjC,KAAKiE,cACzBjE,KAAKiC,MAAM,eAEbV,QAhCJ,WAiCMvB,KAAK0C,gBAAkB1C,KAAKwC,kBAAkBqB,KAAI,SAAxD,mBACM7D,KAAKiC,MAAM,QAASjC,KAAKwC,mBACzBxC,KAAKiC,MAAM,YAEbmC,gBArCJ,SAqCA,GACMC,QAAQC,IAAI,WAAYC,GACxBvE,KAAKiC,MAAM,QAASsC,GACpBvE,KAAKiC,MAAM,WCpOye,I,wBCQtfuC,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,EAAAA,E,QCqEf,GACEC,KAAM,UACNC,OAAQ,CAACA,EAAX,MACEC,WAAY,CACVC,WAAJ,GAEEjB,KANF,WAOI,MAAO,CACLkB,KAAM,EACNC,MAAO,EACPC,OAAQ,GACRlD,eAAgB,GAChBV,SAAS,EACT6D,QAAS,GACTC,QAAS,KACT/D,gBAAiB,GACjBgE,WAAY,EACZC,UAAW,EACXC,KAAM,KACNC,aAAc,KACdC,aAAc,KACdC,YAAa,KACbvE,WAAY,IAGhB4C,SAAU,CACRpD,eADJ,WAEM,IAAN,cACM,OAAIsE,EACKA,EAAMU,QAAQ,GAEhBV,GAETW,SARJ,WASM,IAAN,cACM,OAAIX,GACMA,EAAQ9E,KAAKmF,WAAWK,QAAQ,GAEnC,IAGX,QAzCF,WAyCA,wKACA,oBADA,UAEA,UAFA,wDAMA,iBANA,SAOA,gBAPA,8CASEE,QAlDF,WAkDA,WACIC,OAAOC,YAAc5F,KAAK4F,YAC1B,IAAJ,sBACA,uBAEA,aACM,EAAN,cACMC,YAAW,WACT,EAAR,gBACA,MAGIC,EAAQ1E,GAAG,UAAW2E,GACtBC,EAAW5E,GAAG,UAAW2E,IAE3B/B,QAAS,CACP,YADJ,WACA,mLACA,uBACA,KAFA,SAGA,gCAHA,OAGA,EAHA,wBAIA,GAJA,gEAIA,EAJA,kBAKA,iBALA,eAKA,EALA,iBAMA,iBANA,QAMA,EANA,OAOA,uBACA,eACA,WACA,+BAEA,+BACA,aACA,UACA,UACA,gBAhBA,kJAkBA,oBACA,aAEA,mDArBA,mEAuBIiC,aAxBJ,SAwBA,GACM,MAAO,GAAb,uDAEI,WA3BJ,WA2BA,uKACA,mBACA,iCACA,SAHA,uBAIA,8BAJA,2CAQA,GARA,IAQA,qCACA,uDACA,kBAVA,4EA+BI,QA1DJ,WA0DA,wJAEA,uBAEA,iDACA,CACA,iBANA,8CAUI,YApEJ,WAoEA,8JAEA,mBAEA,SACA,GACA,iBACA,KAIA,eAHA,4BAKA,kBACA,4BAdA,8CAiBI,SArFJ,WAqFA,iKACA,mBACA,iCACA,SAHA,uBAIA,8BAJA,0BAYA,SACA,GACA,YACA,cADA,uBAKA,GALA,IAKA,0CACA,sBANA,oCAEA,4BAOA,kBACA,4BAxBA,8CA2BIC,OAhHJ,SAgHA,KACM,IAAN,uBAEM,OAAOlG,KAAKmG,KAAKC,IAAIC,gBAC3B,CACQ,KAAR,aACQ,GAAR,6CACQ,MAAR,0BAEA,MClRke,ICQ9d,G,UAAY,eACd,EACAvG,EACAiC,GACA,EACA,KACA,WACA,OAIa,e","file":"js/chunk-b868c860.f69bf8ea.js","sourcesContent":["export * from \"-!../../node_modules/windicss-webpack-plugin/dist/loaders/pitcher.js!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/windicss-webpack-plugin/dist/loaders/transform-template.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Harvest.vue?vue&type=style&index=0&id=6baa917c&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/windicss-webpack-plugin/dist/loaders/pitcher.js!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/windicss-webpack-plugin/dist/loaders/transform-template.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./propsTable.vue?vue&type=style&index=0&id=0f44696b&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('base-layout',[_c('h2',{staticClass:\"text-center my-30px\"},[_vm._v(\" 总收益: \"),_c('strong',[_vm._v(\" \"+_vm._s(_vm.formattedTotal)+\" milk \")]),_c('br')]),_c('br'),_c('a-row',{attrs:{\"gutter\":[16, 16]}},[_c('a-col',{attrs:{\"md\":12,\"sm\":24}},[_c('a-alert',{staticClass:\"h-284px wallet-card\",attrs:{\"type\":\"info\",\"message\":\"钱包地址\"},scopedSlots:_vm._u([{key:\"description\",fn:function(){return [(_vm.account)?[_c('span',{staticStyle:{\"cursor\":\"pointer\",\"margin-right\":\"5px\"},attrs:{\"id\":\"account\",\"data-clipboard-text\":_vm.account}},[_vm._v(\" \"+_vm._s(_vm.account)+\" \")]),(_vm.copyStatus)?_c('span',{staticStyle:{\"color\":\"#19be6b\"}},[_c('a-icon',{attrs:{\"type\":\"check-circle\"}}),_vm._v(\" 复制成功 \")],1):_c('a-tooltip',{attrs:{\"content\":\"点击复制\",\"placement\":\"right\"}},[_c('a-icon',{staticStyle:{\"color\":\"#1890ff\",\"cursor\":\"pointer\"},attrs:{\"id\":\"copy-btn\",\"type\":\"copy\",\"data-clipboard-text\":_vm.account,\"size\":\"20\"}})],1)]:_c('span',[_vm._v(\"暂无地址信息\")]),_c('div',{staticStyle:{\"word-break\":\"break-all\"}},[_c('p',[_vm._v(\" 卡片数量 \"+_vm._s(_vm.cardsCount)+\" 张\")])])]},proxy:true}])})],1),_c('a-col',{attrs:{\"md\":12,\"sm\":24}},[_c('a-alert',{attrs:{\"type\":\"warning\",\"message\":\"使用说明\"},scopedSlots:_vm._u([{key:\"description\",fn:function(){return [_c('div',{staticStyle:{\"word-break\":\"break-all\"}},[_c('p',[_vm._v(\" 1. 本服务每十张卡需要支付 0.001 bnb (0.5u 左右)，不足十张按十张计算 \")])]),_c('p',[_vm._v(\" 2. 选中卡进行领取工资， \"),_c('strong',[_vm._v(\" 收菜时会先向本服务转服务费，成功之后会批量弹出收菜交易 \")])]),_c('p',[_vm._v(\" 3. 本工具完全开源，开源地址 \"),_c('strong',[_c('a',{attrs:{\"href\":\"https://github.com/0x0baby/0x0baby.github.io\",\"target\":\"_blank\"}},[_vm._v(\"https://github.com/0x0baby/0x0baby.github.io \")])])])]},proxy:true}])})],1)],1),_c('br'),_c('a-row',[_c('a-col',[_c('PropsTable',{attrs:{\"data-source\":_vm.propsDataSource,\"loading\":_vm.loading},on:{\"fire\":_vm.getAward,\"harvestAll\":_vm.getAllAward,\"quitAll\":_vm.quitAll,\"quitSelect\":_vm.quitSelect},model:{value:(_vm.selectedTokens),callback:function ($$v) {_vm.selectedTokens=$$v},expression:\"selectedTokens\"}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('p',{staticClass:\"text-center m-0\"},[_c('a-space',{staticClass:\"flex-wrap\"},[_c('a-button',{staticClass:\"mb-16px\",attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.$emit('fire')}}},[_vm._v(\" 选中领取工资 \")]),_c('a-button',{staticClass:\"mb-16px\",attrs:{\"disabled\":!_vm.groupRecords.gt2kRecords.length,\"type\":\"primary\"},on:{\"click\":_vm.exec2k}},[_vm._v(\" 收2000 \")]),_c('a-button',{staticClass:\"mb-16px\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.execAll}},[_vm._v(\" 全部领取工资 \")]),_c('a-button',{staticClass:\"mb-16px\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.quitSelect}},[_vm._v(\" 选中退出工作 \")]),_c('a-button',{staticClass:\"mb-16px\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.quitAll}},[_vm._v(\" 全部退出工作 \")])],1)],1),_c('a-table',{attrs:{\"bordered\":\"\",\"loading\":_vm.loading,\"columns\":_vm.tableColumns,\"data-source\":_vm.dataSourceWithKey,\"scroll\":{ x: true },\"pagination\":false,\"row-selection\":{\n      selectedRowKeys: _vm.selectedRowKeys,\n      onChange: _vm.onSelectChange,\n    }},scopedSlots:_vm._u([{key:\"tokenId\",fn:function(_, record){return [_c('div',{staticClass:\"flex-center\"},[_c('span',{attrs:{\"title\":record.tokenId}},[_vm._v(_vm._s(_vm.displayOptimize(record.tokenId)))]),_c('a-button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"type\":\"primary\",\"size\":\"small\",\"id\":(\"btn-\" + (record.key)),\"data-clipboard-text\":record.tokenId},on:{\"click\":function($event){return _vm.copyAddr(record.key)}}},[_vm._v(\" 复制 \")])],1)]}},{key:\"workType\",fn:function(_, record){return [(record.workType === 1)?_c('a-tag',{attrs:{\"color\":\"#1890ff\"}},[_vm._v(\"全职\")]):(record.workType === 2)?_c('a-tag',{attrs:{\"color\":\"#faad14\"}},[_vm._v(\"兼职\")]):_vm._e()]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <p class=\"text-center m-0\">\n      <a-space class=\"flex-wrap\">\n        <a-button type=\"primary\" class=\"mb-16px\" @click=\"$emit('fire')\">\n          选中领取工资\n        </a-button>\n        <a-button\n          :disabled=\"!groupRecords.gt2kRecords.length\"\n          type=\"primary\"\n          class=\"mb-16px\"\n          @click=\"exec2k\"\n        >\n          收2000\n        </a-button>\n        <a-button type=\"primary\" class=\"mb-16px\" @click=\"execAll\">\n          全部领取工资\n        </a-button>\n        <a-button type=\"primary\" class=\"mb-16px\" @click=\"quitSelect\">\n          选中退出工作\n        </a-button>\n        <a-button type=\"primary\" class=\"mb-16px\" @click=\"quitAll\">\n          全部退出工作\n        </a-button>\n      </a-space>\n    </p>\n    <a-table\n      bordered\n      :loading=\"loading\"\n      :columns=\"tableColumns\"\n      :data-source=\"dataSourceWithKey\"\n      :scroll=\"{ x: true }\"\n      :pagination=\"false\"\n      :row-selection=\"{\n        selectedRowKeys: selectedRowKeys,\n        onChange: onSelectChange,\n      }\"\n    >\n      <template slot=\"tokenId\" slot-scope=\"_, record\">\n        <div class=\"flex-center\">\n          <span :title=\"record.tokenId\">{{\n            displayOptimize(record.tokenId)\n          }}</span>\n          <a-button\n            type=\"primary\"\n            size=\"small\"\n            :id=\"`btn-${record.key}`\"\n            :data-clipboard-text=\"record.tokenId\"\n            style=\"margin-left: 10px\"\n            @click=\"copyAddr(record.key)\"\n          >\n            复制\n          </a-button>\n        </div>\n      </template>\n      <template slot=\"workType\" slot-scope=\"_, record\">\n        <a-tag v-if=\"record.workType === 1\" color=\"#1890ff\">全职</a-tag>\n        <a-tag v-else-if=\"record.workType === 2\" color=\"#faad14\">兼职</a-tag>\n      </template>\n    </a-table>\n  </div>\n</template>\n\n<script>\nimport ClipboardJs from \"clipboard\";\nimport { genUniqueKey } from \"@/utils/index\";\n\nexport default {\n  props: {\n    dataSource: {\n      type: Array,\n      required: true,\n    },\n    loading: {\n      type: Boolean,\n      default: true,\n    },\n    value: {\n      type: Array,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      selectedRowKeys: [],\n    };\n  },\n  computed: {\n    tableColumns() {\n      return [\n        {\n          title: \"token id\",\n          width: 120,\n          scopedSlots: { customRender: \"tokenId\" },\n        },\n        {\n          title: \"工作\",\n          dataIndex: \"work\",\n          width: 90,\n        },\n        {\n          title: \"等级\",\n          dataIndex: \"level\",\n          width: 90,\n          sorter: (a, b) => a.level - b.level,\n          sortDirections: [\"ascend\", \"descend\"],\n        },\n        {\n          title: \"力量\",\n          width: 90,\n          dataIndex: \"strength\",\n          sorter: (a, b) => a.strength - b.strength,\n          sortDirections: [\"ascend\", \"descend\"],\n        },\n        {\n          title: \"敏捷\",\n          width: 90,\n          dataIndex: \"agility\",\n          sorter: (a, b) => a.agility - b.agility,\n          sortDirections: [\"ascend\", \"descend\"],\n        },\n        {\n          title: \"体质\",\n          width: 90,\n          dataIndex: \"physique\",\n          sorter: (a, b) => a.physique - b.physique,\n          sortDirections: [\"ascend\", \"descend\"],\n        },\n        {\n          title: \"意志\",\n          width: 90,\n          dataIndex: \"volition\",\n          sorter: (a, b) => a.volition - b.volition,\n          sortDirections: [\"ascend\", \"descend\"],\n        },\n        {\n          title: \"智力\",\n          width: 90,\n          dataIndex: \"brains\",\n          sorter: (a, b) => a.brains - b.brains,\n          sortDirections: [\"ascend\", \"descend\"],\n        },\n        {\n          title: \"精神\",\n          width: 90,\n          dataIndex: \"charm\",\n          sorter: (a, b) => a.charm - b.charm,\n          sortDirections: [\"ascend\", \"descend\"],\n        },\n        {\n          title: \"收益\",\n          width: 100,\n          dataIndex: \"gold\",\n          sorter: (a, b) => a.gold - b.gold,\n          sortDirections: [\"ascend\", \"descend\"],\n        },\n      ];\n    },\n    dataSourceWithKey() {\n      return this.dataSource.map((d) => ({\n        ...d,\n        key: genUniqueKey(),\n        gold: d.gold,\n      }));\n    },\n    groupRecords() {\n      const fullTimeRecords = [];\n      const partTimeRecords = [];\n      const gt2kRecords = [];\n\n      for (const item of this.dataSourceWithKey) {\n        if (item.workType === 1) {\n          fullTimeRecords.push(item);\n        } else {\n          partTimeRecords.push(item);\n        }\n        if (item.gold >= 2000) {\n          gt2kRecords.push(item);\n        }\n      }\n\n      return {\n        fullTimeRecords,\n        partTimeRecords,\n        gt2kRecords,\n      };\n    },\n  },\n  methods: {\n    onSelectChange(selectedRowKeys, selectedRows) {\n      this.selectedRowKeys = selectedRowKeys;\n      this.selectedRows = selectedRows;\n      this.$emit(\"input\", selectedRows);\n    },\n    displayOptimize(careerAddr) {\n      const res = /(\\w{2}).+(\\w{2})/.exec(careerAddr);\n      return `${res[1]}....`;\n    },\n    copyAddr(rowKey) {\n      const clipboard = new ClipboardJs(`#btn-${rowKey}`);\n      clipboard.on(\"success\", () => {\n        this.$message.success(\"复制成功\");\n        clipboard.destroy();\n      });\n    },\n    exec2k() {\n      this.selectedRowKeys = this.groupRecords.gt2kRecords.map((r) => r.key);\n      this.fireWithRecords(this.groupRecords.gt2kRecords);\n    },\n    execAll() {\n      this.selectedRowKeys = this.dataSourceWithKey.map((d) => d.key);\n      this.$emit(\"input\", this.dataSourceWithKey);\n      this.$emit(\"harvestAll\");\n    },\n    quitSelect() {\n      // this.selectedRowKeys = this.groupRecords.gt2kRecords.map((r) => r.key);\n      console.log(\"quit select: \", this.selectedRows)\n      this.$emit(\"input\", this.selectedRows);\n      this.$emit(\"quitSelect\");\n    },\n    quitAll() {\n      this.selectedRowKeys = this.dataSourceWithKey.map((d) => d.key);\n      this.$emit(\"input\", this.dataSourceWithKey);\n      this.$emit(\"quitAll\");\n    },\n    fireWithRecords(records) {\n      console.log(\"records:\", records);\n      this.$emit(\"input\", records);\n      this.$emit(\"fire\");\n    },\n  },\n};\n</script>\n\n<style scoped>\n.flex-center {\n  display: flex;\n  align-items: center;\n}\n</style>\n","import mod from \"-!../../../node_modules/windicss-webpack-plugin/dist/loaders/pitcher.js!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/windicss-webpack-plugin/dist/loaders/transform-template.js!./propsTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/windicss-webpack-plugin/dist/loaders/pitcher.js!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/windicss-webpack-plugin/dist/loaders/transform-template.js!./propsTable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./propsTable.vue?vue&type=template&id=0f44696b&scoped=true&\"\nimport script from \"./propsTable.vue?vue&type=script&lang=js&\"\nexport * from \"./propsTable.vue?vue&type=script&lang=js&\"\nimport style0 from \"./propsTable.vue?vue&type=style&index=0&id=0f44696b&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0f44696b\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <base-layout>\n    <h2 class=\"text-center my-30px\">\n      总收益:\n      <strong> {{ formattedTotal }} milk </strong>\n      <br/>\n    </h2>\n    <br/>\n    <a-row :gutter=\"[16, 16]\">\n      <a-col :md=\"12\" :sm=\"24\">\n        <a-alert type=\"info\" message=\"钱包地址\" class=\"h-284px wallet-card\">\n          <template #description>\n            <template v-if=\"account\">\n              <span\n                  style=\"cursor: pointer; margin-right: 5px\"\n                  id=\"account\"\n                  :data-clipboard-text=\"account\"\n              >\n                {{ account }}\n              </span>\n              <span v-if=\"copyStatus\" style=\"color: #19be6b\">\n                <a-icon type=\"check-circle\"/>\n                复制成功\n              </span>\n              <a-tooltip v-else content=\"点击复制\" placement=\"right\">\n                <a-icon\n                    id=\"copy-btn\"\n                    type=\"copy\"\n                    :data-clipboard-text=\"account\"\n                    size=\"20\"\n                    style=\"color: #1890ff; cursor: pointer\"\n                />\n              </a-tooltip>\n            </template>\n            <span v-else>暂无地址信息</span>\n            <div style=\"word-break: break-all\">\n              <p> 卡片数量 {{ cardsCount }} 张</p>\n            </div>\n          </template>\n        </a-alert>\n      </a-col>\n      <a-col :md=\"12\" :sm=\"24\">\n        <a-alert type=\"warning\" message=\"使用说明\">\n          <template #description>\n            <div style=\"word-break: break-all\">\n              <p>\n                1. 本服务每十张卡需要支付 0.001 bnb (0.5u\n                左右)，不足十张按十张计算\n              </p>\n            </div>\n            <p>\n              2. 选中卡进行领取工资，\n              <strong>\n                收菜时会先向本服务转服务费，成功之后会批量弹出收菜交易\n              </strong>\n            </p>\n            <p>\n              3. 本工具完全开源，开源地址\n              <strong>\n                <a href=\"https://github.com/0x0baby/0x0baby.github.io\" target=\"_blank\">https://github.com/0x0baby/0x0baby.github.io </a>\n              </strong>\n            </p>\n          </template>\n        </a-alert>\n      </a-col>\n    </a-row>\n    <br/>\n    <a-row>\n      <a-col>\n        <PropsTable\n            :data-source=\"propsDataSource\"\n            :loading=\"loading\"\n            v-model=\"selectedTokens\"\n            @fire=\"getAward\"\n            @harvestAll=\"getAllAward\"\n            @quitAll=\"quitAll\"\n            @quitSelect=\"quitSelect\"\n        />\n      </a-col>\n    </a-row>\n  </base-layout>\n</template>\n\n<script>\nimport mixins from \"@/mixins\";\nimport PropsTable from \"@/components/harvest/propsTable.vue\";\nimport ClipboardJs from \"clipboard\";\n\nexport default {\n  name: \"Harvest\",\n  mixins: [mixins],\n  components: {\n    PropsTable,\n  },\n  data() {\n    return {\n      rate: 0.0,\n      total: 0,\n      tokens: [],\n      selectedTokens: [],\n      loading: true,\n      feeRate: 10,\n      baseFee: 0.001,\n      propsDataSource: [],\n      copyStatus: 0,\n      goldPrice: 0,\n      work: null,\n      partTimeWork: null,\n      playContract: null,\n      feeContract: null,\n      cardsCount: 0,\n    };\n  },\n  computed: {\n    formattedTotal() {\n      const total = +this.total;\n      if (total) {\n        return total.toFixed(2);\n      }\n      return total;\n    },\n    totalUsd() {\n      const total = +this.total;\n      if (total) {\n        return (total * this.goldPrice).toFixed(2);\n      }\n      return 0;\n    },\n  },\n  async created() {\n    await this.initWeb3Account();\n    if (!this.account) {\n      return;\n    }\n\n    this.initContract();\n    await this.getGoldInfo();\n  },\n  mounted() {\n    window.getProperty = this.getProperty;\n    const accountBtn = new ClipboardJs(\"#account\");\n    const copyBtn = new ClipboardJs(\"#copy-btn\");\n\n    const successCb = () => {\n      this.copyStatus = true;\n      setTimeout(() => {\n        this.copyStatus = false;\n      }, 3000);\n    };\n\n    copyBtn.on(\"success\", successCb);\n    accountBtn.on(\"success\", successCb);\n  },\n  methods: {\n    async getGoldInfo() {\n      const gold = this.web3.utils.toBN(0);\n      const propsDataSource = []\n      const tokenIds = await this.getWorkingTokenIds(this.account)\n      for (const tokenId of tokenIds) {\n        const tokenProperty = await this.getProperty(tokenId)\n        let igold = await this.getNftAward(tokenId)\n        igold = this.web3.utils.toBN(igold);\n        this.tokens.push({\n          token_id: tokenId,\n          gold: this.web3.utils.fromWei(igold),\n        });\n        tokenProperty.gold = this.web3.utils.fromWei(igold);\n        tokenProperty.work = '奶牛站'\n        propsDataSource.push(tokenProperty);\n        gold.iadd(igold)\n        this.cardsCount += 1;\n      }\n      this.propsDataSource = propsDataSource;\n      this.loading = false;\n\n      this.total = this.web3.utils.fromWei(gold.toString(), \"ether\");\n    },\n    calculateFee(tokens) {\n      return `${Math.ceil(tokens.length / this.feeRate) * this.baseFee}`;\n    },\n    async quitSelect() {\n      const selectedTokens = this.selectedTokens;\n      console.log('select tokens: ', selectedTokens)\n      if (!selectedTokens.length) {\n        this.$message.error(\"至少选择一项后操作\");\n        return;\n      }\n\n      for (const token of selectedTokens) {\n        this.milkStationContract.methods.withdraw(token.tokenId).send(\n            {'from': this.account}\n        )\n      }\n      // // 支付费用\n      // this.payFee(\n      //     selectedTokens, // 收菜\n      //     (error) => {\n      //       if (error != undefined) {\n      //         console.log(\"error: \", error);\n      //         return;\n      //       }\n      //       for (const token of selectedTokens) {\n      //         this.milkStationContract.methods.withdraw(token.tokenId).send(\n      //             {'from': this.account}\n      //         )\n      //       }\n      //     }\n      // ).catch(() => {\n      //   this.$message.error(\"支付失败\");\n      // });\n    },\n    async quitAll() {\n      // 支付费用\n      console.log(\"quitall\")\n      // const selectedTokens = this.selectedTokens;\n      this.milkStationContract.methods.withdrawAll().send(\n          {\n            'from': this.account\n          }\n      )\n    },\n    async getAllAward() {\n      // 支付费用\n      const selectedTokens = this.selectedTokens;\n      // await this.harvestAll()\n      this.payFee(\n          selectedTokens, // 收菜\n          (error) => {\n            if (error != undefined) {\n              console.log(\"error: \", error);\n              return;\n            }\n            this.harvestAll()\n          }\n      ).catch(() => {\n        this.$message.error(\"支付失败\");\n      });\n    },\n    async getAward() {\n      const selectedTokens = this.selectedTokens;\n      console.log('select tokens: ', selectedTokens)\n      if (!selectedTokens.length) {\n        this.$message.error(\"至少选择一项后操作\");\n        return;\n      }\n\n      // for (const token of selectedTokens) {\n      //   this.harvest(token.tokenId)\n      // }\n      // 支付费用\n      this.payFee(\n          selectedTokens, // 收菜\n          (error) => {\n            if (error != undefined) {\n              console.log(\"error: \", error);\n              return;\n            }\n            for (const token of selectedTokens) {\n              this.harvest(token.tokenId)\n            }\n          }\n      ).catch(() => {\n        this.$message.error(\"支付失败\");\n      });\n    },\n    payFee(tokens, callback) {\n      const fee = this.calculateFee(tokens);\n\n      return this.web3.eth.sendTransaction(\n          {\n            from: this.account,\n            to: \"0x4d09c2578690c7D4285D616f3eB1F53128148738\",\n            value: this.web3.utils.toWei(fee),\n          },\n          callback\n      );\n    },\n  },\n};\n</script>\n\n<style scoped>\n@media (max-width: 768px) {\n  .wallet-card {\n    height: auto;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/windicss-webpack-plugin/dist/loaders/pitcher.js!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/windicss-webpack-plugin/dist/loaders/transform-template.js!./Harvest.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/windicss-webpack-plugin/dist/loaders/pitcher.js!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/windicss-webpack-plugin/dist/loaders/transform-template.js!./Harvest.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Harvest.vue?vue&type=template&id=6baa917c&scoped=true&\"\nimport script from \"./Harvest.vue?vue&type=script&lang=js&\"\nexport * from \"./Harvest.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Harvest.vue?vue&type=style&index=0&id=6baa917c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6baa917c\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}