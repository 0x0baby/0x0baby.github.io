(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31f22408"],{"1fcb":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-layout",[n("a-row",{attrs:{gutter:[16,16]}},[n("a-col",{attrs:{md:12,sm:24}},[n("a-alert",{staticClass:"h-284px wallet-card",attrs:{type:"info",message:"钱包地址"},scopedSlots:t._u([{key:"description",fn:function(){return[t.account?[n("span",{staticStyle:{cursor:"pointer","margin-right":"5px"},attrs:{id:"account","data-clipboard-text":t.account}},[t._v(" "+t._s(t.account)+" ")]),t.copyStatus?n("span",{staticStyle:{color:"#19be6b"}},[n("a-icon",{attrs:{type:"check-circle"}}),t._v(" 复制成功 ")],1):n("a-tooltip",{attrs:{content:"点击复制",placement:"right"}},[n("a-icon",{staticStyle:{color:"#1890ff",cursor:"pointer"},attrs:{id:"copy-btn",type:"copy","data-clipboard-text":t.account,size:"20"}})],1)]:n("span",[t._v("暂无地址信息")]),n("div",{staticStyle:{"word-break":"break-all"}},[n("p",[t._v(" 卡片数量 "+t._s(t.cardsCount)+" 张")])])]},proxy:!0}])})],1),n("a-col",{attrs:{md:12,sm:24}},[n("a-alert",{attrs:{type:"warning",message:"使用说明"},scopedSlots:t._u([{key:"description",fn:function(){return[n("p",[t._v(" 1. 本工具完全开源，开源地址 "),n("strong",[n("a",{attrs:{href:"https://github.com/0x0baby/0x0baby.github.io",target:"_blank"}},[t._v("https://github.com/0x0baby/0x0baby.github.io ")])])])]},proxy:!0}])})],1)],1),n("br"),n("a-row",[n("a-col",[n("PropsTable",{attrs:{"data-source":t.propsDataSource,loading:t.loading},on:{fire:t.getAward,workAll:t.workAll,workSelect:t.workSelect},model:{value:t.selectedTokens,callback:function(e){t.selectedTokens=e},expression:"selectedTokens"}})],1)],1)],1)},o=[],a=n("b85c"),s=n("1da1"),c=(n("96cf"),n("b680"),n("9c9e")),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("p",{staticClass:"text-center m-0"},[n("a-space",{staticClass:"flex-wrap"},[n("a-button",{staticClass:"mb-16px",attrs:{type:"primary"},on:{click:t.workSelect}},[t._v(" 选中工作 ")]),n("a-button",{staticClass:"mb-16px",attrs:{type:"primary"},on:{click:t.workAll}},[t._v(" 全部工作 ")])],1)],1),n("a-table",{attrs:{bordered:"",loading:t.loading,columns:t.tableColumns,"data-source":t.dataSourceWithKey,scroll:{x:!0},pagination:!1,"row-selection":{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange}},scopedSlots:t._u([{key:"tokenId",fn:function(e,r){return[n("div",{staticClass:"flex-center"},[n("span",{attrs:{title:r.tokenId}},[t._v(t._s(t.displayOptimize(r.tokenId)))]),n("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small",id:"btn-"+r.key,"data-clipboard-text":r.tokenId},on:{click:function(e){return t.copyAddr(r.key)}}},[t._v(" 复制 ")])],1)]}},{key:"workType",fn:function(e,r){return[1===r.workType?n("a-tag",{attrs:{color:"#1890ff"}},[t._v("全职")]):2===r.workType?n("a-tag",{attrs:{color:"#faad14"}},[t._v("兼职")]):t._e()]}}])})],1)},l=[],u=n("5530"),d=(n("d81d"),n("ac1f"),n("b311")),p=n.n(d),h=n("ed08"),f={props:{dataSource:{type:Array,required:!0},loading:{type:Boolean,default:!0},value:{type:Array,required:!0}},data:function(){return{selectedRowKeys:[]}},computed:{tableColumns:function(){return[{title:"token id",width:120,scopedSlots:{customRender:"tokenId"}},{title:"职业",dataIndex:"career",width:90},{title:"等级",dataIndex:"level",width:90,sorter:function(t,e){return t.level-e.level},sortDirections:["ascend","descend"]},{title:"力量",width:90,dataIndex:"strength",sorter:function(t,e){return t.strength-e.strength},sortDirections:["ascend","descend"]},{title:"敏捷",width:90,dataIndex:"agility",sorter:function(t,e){return t.agility-e.agility},sortDirections:["ascend","descend"]},{title:"体质",width:90,dataIndex:"physique",sorter:function(t,e){return t.physique-e.physique},sortDirections:["ascend","descend"]},{title:"意志",width:90,dataIndex:"volition",sorter:function(t,e){return t.volition-e.volition},sortDirections:["ascend","descend"]},{title:"智力",width:90,dataIndex:"brains",sorter:function(t,e){return t.brains-e.brains},sortDirections:["ascend","descend"]},{title:"精神",width:90,dataIndex:"charm",sorter:function(t,e){return t.charm-e.charm},sortDirections:["ascend","descend"]}]},dataSourceWithKey:function(){return this.dataSource.map((function(t){return Object(u["a"])(Object(u["a"])({},t),{},{key:Object(h["a"])(),gold:t.gold})}))},groupRecords:function(){var t,e=[],n=[],r=[],o=Object(a["a"])(this.dataSourceWithKey);try{for(o.s();!(t=o.n()).done;){var s=t.value;1===s.workType?e.push(s):n.push(s),s.gold>=2e3&&r.push(s)}}catch(c){o.e(c)}finally{o.f()}return{fullTimeRecords:e,partTimeRecords:n,gt2kRecords:r}}},methods:{onSelectChange:function(t,e){this.selectedRowKeys=t,console.log("aa",this.selectedRowKeys),this.selectedRows=e,console.log("b",this.selectedRows),this.$emit("input",e)},displayOptimize:function(t){var e=/(\w{2}).+(\w{2})/.exec(t);return"".concat(e[1],"....")},copyAddr:function(t){var e=this,n=new p.a("#btn-".concat(t));n.on("success",(function(){e.$message.success("复制成功"),n.destroy()}))},exec2k:function(){this.selectedRowKeys=this.groupRecords.gt2kRecords.map((function(t){return t.key})),this.fireWithRecords(this.groupRecords.gt2kRecords)},execAll:function(){this.selectedRowKeys=this.dataSourceWithKey.map((function(t){return t.key})),this.$emit("input",this.dataSourceWithKey),this.$emit("harvestAll")},workSelect:function(){console.log("quit select: ",this.selectedRows),this.$emit("input",this.selectedRows),this.$emit("workSelect")},workAll:function(){this.selectedRowKeys=this.dataSourceWithKey.map((function(t){return t.key})),this.$emit("input",this.dataSourceWithKey),this.$emit("workAll")},fireWithRecords:function(t){console.log("records:",t),this.$emit("input",t),this.$emit("fire")}}},y=f,m=(n("ab1c"),n("2877")),g=Object(m["a"])(y,i,l,!1,null,"29493272",null),w=g.exports,b={name:"Harvest",mixins:[c["a"]],components:{PropsTable:w},data:function(){return{rate:0,total:0,tokens:[],selectedTokens:[],loading:!0,feeRate:10,baseFee:.001,propsDataSource:[],copyStatus:0,goldPrice:0,work:null,partTimeWork:null,playContract:null,feeContract:null,cardsCount:0}},computed:{formattedTotal:function(){var t=+this.total;return t?t.toFixed(2):t},totalUsd:function(){var t=+this.total;return t?(t*this.goldPrice).toFixed(2):0}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.initWeb3Account();case 2:if(t.account){e.next=4;break}return e.abrupt("return");case 4:return t.initContract(),e.next=7,t.getMyBabyList();case 7:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;window.getProperty=this.getProperty;var e=new p.a("#account"),n=new p.a("#copy-btn"),r=function(){t.copyStatus=!0,setTimeout((function(){t.copyStatus=!1}),3e3)};n.on("success",r),e.on("success",r)},methods:{getMyBabyList:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getAllToken(t.account);case 2:n=e.sent,t.propsDataSource=n,t.loading=!1,t.cardsCount=n.length;case 6:case"end":return e.stop()}}),e)})))()},calculateFee:function(t){return"".concat(Math.ceil(t.length/this.feeRate)*this.baseFee)},workAll:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,r,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("work all"),n=t.selectedTokens,console.log("all ",n),r=Object(a["a"])(n);try{for(r.s();!(o=r.n()).done;)s=o.value,t.milkStationContract.methods.deposit(s.tokenId).send({from:t.account})}catch(c){r.e(c)}finally{r.f()}case 5:case"end":return e.stop()}}),e)})))()},workSelect:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,r,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("work select"),n=t.selectedTokens,console.log("select ",n),void 0!==n&&n.length){e.next=6;break}return t.$message.error("至少选择一项后操作"),e.abrupt("return");case 6:r=Object(a["a"])(n);try{for(r.s();!(o=r.n()).done;)s=o.value,t.milkStationContract.methods.deposit(s.tokenId).send({from:t.account})}catch(c){r.e(c)}finally{r.f()}case 8:case"end":return e.stop()}}),e)})))()},getAllAward:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.selectedTokens,t.payFee(n,(function(e){void 0==e?t.harvestAll():console.log("error: ",e)})).catch((function(){t.$message.error("支付失败")}));case 2:case"end":return e.stop()}}),e)})))()},getAward:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.selectedTokens,console.log("select tokens: ",n),n.length){e.next=5;break}return t.$message.error("至少选择一项后操作"),e.abrupt("return");case 5:t.payFee(n,(function(e){if(void 0==e){var r,o=Object(a["a"])(n);try{for(o.s();!(r=o.n()).done;){var s=r.value;t.harvest(s.tokenId)}}catch(c){o.e(c)}finally{o.f()}}else console.log("error: ",e)})).catch((function(){t.$message.error("支付失败")}));case 6:case"end":return e.stop()}}),e)})))()},payFee:function(t,e){var n=this.calculateFee(t);return this.web3.eth.sendTransaction({from:this.account,to:"0x4d09c2578690c7D4285D616f3eB1F53128148738",value:this.web3.utils.toWei(n)},e)}}},k=b,v=(n("78b1"),Object(m["a"])(k,r,o,!1,null,"b48b8a32",null));e["default"]=v.exports},"78b1":function(t,e,n){"use strict";n("8913")},8913:function(t,e,n){},a0ed:function(t,e,n){},ab1c:function(t,e,n){"use strict";n("a0ed")}}]);
//# sourceMappingURL=chunk-31f22408.5aa0bc17.js.map